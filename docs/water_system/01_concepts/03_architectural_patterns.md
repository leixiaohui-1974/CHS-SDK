# 核心概念: 两种仿真世界的设计哲学

本篇文档深入探讨 `core_lib` 中两种仿真世界——`SimulationHarness` 和 `OntologySimulationAgent`——背后的设计哲学与适用场景。

让我们用一个**房产开发**的比喻来彻底理解它们的区别。

## 1. `SimulationHarness`: 模块化的“开发平台”

您可以把 `SimulationHarness` 想象成一个房地产开发商为您提供的、设施齐全的**开发平台**。

这个平台包含：
*   一块**带基础设施的空地**: 相当于 `SimulationHarness` 对象本身，它提供了时间和空间的基本规则。
*   一个**建材和预制件仓库**: 相当于 `core_lib/physical_objects` 目录，里面有标准化的“墙体”(`Pipe`)、“门窗”(`Gate`)、“水龙头”(`Pump`)等模块。
*   一套**建筑蓝图规范 (YAML)**: 您作为开发者，可以通过编写 `components.yml` 和 `topology.yml` 等蓝图，来告诉平台您想如何使用这些建材，搭建一个什么样子的房子。
*   一个**智能家居安装团队**: 相当于 `SimulationLoader`，它会读取您的蓝图，把所有建材和智能设备（Agents）准确地安装到位。

建好之后，`SimulationHarness` 负责“通电”，让您亲手设计的房子运转起来，观察其内部的运作情况。

*   **核心职责**: **灵活性、通用性、可组合性**。
*   **适用场景**: 当您需要**从头构建、仿真和研究一个特定结构的水力系统**时。

## 2. `OntologySimulationAgent`: 高保真的“精装样板房”

您可以把 `OntologySimulationAgent` 想象成开发商已经建好的一套**精装修、不可改造的“样板房”**。

这个样板房的特点是：
*   **结构固定**: 它的房间布局、水电管线（即其内部的物理模型）是固化在代码里的，您无法改变。
*   **行为已知**: 它会按照固定的脚本运行。例如，它知道在 `t=50` 秒时，客厅会“发生一次扰动”（模拟侧向入流）。
*   **接口标准**: 您可以从外部与它交互，比如按它的电灯开关（发布控制指令），或者读取它的温湿度传感器读数（订阅其发布的状态消息）。

它的主要用途是，当您发明了一个新的“智能扫地机器人”（比如您的一个控制算法智能体）时，您可以把它放进这个样板房里进行反复测试。因为样板房的环境是完全一致、可复现的，所以您可以很方便地评估您的机器人在一个标准环境下的性能。

*   **核心职责**: **一致性、可复现性、高保真的行为模拟**。
*   **适用场景**: 当您需要**测试一个独立的、功能性的智能体（如控制、诊断、预测算法）**时，它提供了一个理想的、稳定的测试基准。

## 3. 关系总结：为何不统一？

| 特性 | `SimulationHarness` (开发平台) | `OntologySimulationAgent` (样板房) |
| :--- | :--- | :--- |
| **目的** | 构建和模拟 **任意结构** 的系统 | 测试智能体在 **特定行为** 的环境下的反应 |
| **灵活性** | 极高，由YAML配置定义 | 极低，逻辑硬编码 |
| **关注点** | 系统的 **结构 (Structure)** | 环境的 **行为 (Behavior)** |
| **设计原则** | 通用性、可组合性 | 一致性、可复现性 |

**结论**: 它们是为解决两种不同问题而设计的工具，遵循**单一职责原则**。`SimulationHarness` 是一个通用的**仿真环境**，而 `OntologySimulationAgent` 是一个特殊的**仿真智能体**。将它们分开，使得框架的设计更清晰、更专业。
