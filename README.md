# 智能水务平台 (SWP) - 数字孪生与多代理系统框架

本代码库包含一个前瞻性的“智慧水务系统数字孪生与协同控制平台”的基础框架。该项目被构想为一个“母体机器”——一个用于模拟、生成、测试和管理复杂水务系统的元平台，其核心采用了多代理系统（MAS）的方法。

## 核心架构

SWP 建立在一个分层的、模块化的架构之上，其设计灵感来源于 Simulink 的模块化建模思想。每个组件都被设计为可独立开发、测试和组合的模块。

- **核心库 (`swp`)**: 包含平台的所有核心逻辑，包括物理模型、智能体、控制器和调度算法。
- **示例 (`examples`)**: 提供了一系列配置驱动的示例，用于演示平台的功能。

## 示例 (Examples)

本项目包含一系列结构清晰、自包含的示例，位于 `/examples` 目录中。

### 示例结构

每一个子目录都代表一个独立的、端到端的示例场景。例如，`examples/hierarchical_control/` 包含一个完整的分层控制示例。

在每个示例目录中，您会找到：
- **`README.md`**: 对该示例的详细说明，包括业务场景、控制策略和预期结果。**我们强烈建议您首先阅读此文件。**
- **`run.py`**: 用于执行此示例的简单脚本。
- **`sim_config.json`**: 定义系统的核心：物理组件、拓扑结构和控制智能体。
- **`disturbances.json`**: (可选) 定义此场景中发生的外部扰动事件。
- **`plots.json`**: (可选) 定义了仿真结束后生成的可视化图表的配置。

### 如何运行一个示例

1.  **选择一个示例**: 浏览 `/examples` 目录，选择一个您感兴趣的场景。
2.  **阅读说明**: 进入该示例的目录，并阅读其中的 `README.md` 文件来理解其背后的业务逻辑。
3.  **运行示例**: 在该示例的目录下，直接运行 `run.py` 脚本。

例如，要运行分层控制示例：
```bash
cd examples/hierarchical_control/
python3 run.py
```

该脚本会自动调用位于 `examples` 顶层的通用运行器，执行仿真并将所有输出（包括 `history.csv` 数据文件和 `results.png` 图表）保存在该示例目录下的 `output/` 子目录中。

### 推荐的探索路径

我们建议从以下示例开始，以逐步了解平台的功能：
1.  **`examples/hierarchical_control/`**: 学习一个完整的分层（中央MPC+本地PID）控制系统如何应对预报的洪水。
2.  **`examples/joint_dispatch/`**: 探索一个基于规则的中央调度器如何协调多个目标。
3.  **`examples/multi_turbine_coordination/`**: 了解如何使用一个智能体控制多个执行器（6台水轮机）并响应外部事件。
