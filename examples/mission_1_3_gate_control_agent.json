{
    "description": "Mission 1.3: Gate Control Agent. Demonstrates a LocalControlAgent with a PID controller in an isolated, event-driven test.",
    "simulation_settings": {
        "dt": 1.0,
        "duration": 3
    },
    "topics": {
        "observation_topic": "state/canal/level",
        "action_topic": "action/gate/opening"
    },
    "controllers": [
        {
            "name": "pid_controller_1",
            "type": "PIDController",
            "parameters": {
                "Kp": -0.5,
                "Ki": -0.1,
                "Kd": 0.0,
                "setpoint": 10.0,
                "min_output": 0.0,
                "max_output": 2.0
            }
        }
    ],
    "agents": [
        {
            "name": "gate_control_agent_1",
            "type": "LocalControlAgent",
            "controller": "pid_controller_1",
            "observation_topic": "observation_topic",
            "observation_key": "water_level",
            "action_topic": "action_topic",
            "dt": 1.0
        }
    ],
    "scenario": {
        "events": [
            {
                "time": 0,
                "type": "publish_command",
                "topic": "observation_topic",
                "payload": { "water_level": 10.5 }
            },
            {
                "time": 1,
                "type": "publish_command",
                "topic": "observation_topic",
                "payload": { "water_level": 9.8 }
            },
            {
                "time": 2,
                "type": "publish_command",
                "topic": "observation_topic",
                "payload": { "water_level": 10.0 }
            }
        ]
    }
}
