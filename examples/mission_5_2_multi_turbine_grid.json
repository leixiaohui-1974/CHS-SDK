{
    "description": "Mission 5.2: Multi-Turbine Coordination. A control agent manages 6 turbines to meet a power target and reacts to a grid event.",
    "harness_config": { "duration": 300, "dt": 1.0 },
    "topics": {
        "power_target": "target/power/total",
        "grid_limit": "grid/power/limit",
        "reservoir_inflow": "data/inflow/reservoir",
        "reservoir_state": "state/reservoir/forebay"
    },
    "components": [
        { "name": "forebay_reservoir", "type": "Reservoir", "initial_state": {"volume": 75000000, "water_level": 15.0}, "parameters": {"surface_area": 5e6}, "inflow_topic": "reservoir_inflow" },
        { "name": "turbine_1", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/1" },
        { "name": "turbine_2", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/2" },
        { "name": "turbine_3", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/3" },
        { "name": "turbine_4", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/4" },
        { "name": "turbine_5", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/5" },
        { "name": "turbine_6", "type": "WaterTurbine", "parameters": {"efficiency": 0.9, "max_flow_rate": 100}, "action_topic": "action/turbine/6" }
    ],
    "connections": [
        ["forebay_reservoir", "turbine_1"], ["forebay_reservoir", "turbine_2"], ["forebay_reservoir", "turbine_3"],
        ["forebay_reservoir", "turbine_4"], ["forebay_reservoir", "turbine_5"], ["forebay_reservoir", "turbine_6"]
    ],
    "controllers": [
        { "name": "hydro_ctrl_1", "type": "HydropowerController", "parameters": { "head_m": 15.0 } }
    ],
    "agents": [
        { "name": "supervisor", "type": "SupervisorAgent", "power_target_topic": "power_target", "initial_target_mw": 12.0 },
        { "name": "inflow_provider", "type": "InflowAgent", "inflow_topic": "reservoir_inflow", "inflow_rate": 85.0 },
        { "name": "reservoir_twin", "type": "DigitalTwinAgent", "simulated_object": "forebay_reservoir", "state_topic": "reservoir_state" },
        { "name": "grid_simulator", "type": "GridCommunicationAgent", "grid_limit_topic": "grid_limit", "rejection_time_s": 150.0, "new_limit_mw": 6.0 },
        { "name": "hydropower_control_agent", "type": "LocalControlAgent",
          "controller": "hydro_ctrl_1",
          "observation_topic": "reservoir_state",
          "command_topic": "power_target",
          "action_topic": ["action/turbine/1", "action/turbine/2", "action/turbine/3", "action/turbine/4", "action/turbine/5", "action/turbine/6"]
        }
    ],
    "output_settings": {
        "plot_file": "mission_5_2_results.png"
    }
}
