# 示例 1: 基础水箱仿真 (标准版)

## 1. 场景目标

本示例是整个项目中最基础、最核心的入门场景。

它的目标是演示如何使用本仿真框架的标准组件，从零开始搭建一个简单的物理仿真：**一个有持续外部入流、但没有出流的水箱**。

这个场景展示了框架的核心机制：
-   通过 `components.yml` 定义物理世界。
-   通过 `agents.yml` 定义数据输入和智能体。
-   通过 `config.yml` 配置全局仿真参数。
-   所有组件和智能体通过消息总线进行解耦和通信。

## 2. 架构设计

本场景的架构非常简单：

### 物理组件 (`components.yml`)

-   `Reservoir`: 一个标准的水库（水箱）物理对象。
    -   它被配置为订阅 `inflow_topic` 主题，以获取其入流量。
    -   由于 `topology.yml` 中没有为其定义下游组件，所以它没有物理出流，其水位会随入流而持续上涨。

### 智能体 (`agents.yml`)

-   `CsvInflowAgent`: 一个标准的数据输入智能体。
    -   它的职责是从 `inflow.csv` 文件中读取预设的流量数据。
    -   然后，它将读取到的流量值发布到 `inflow_topic` 主题上，供 `Reservoir` 组件消费。

## 3. 如何运行

在项目根目录下执行以下命令：

```bash
python run_scenario.py examples/watertank_refactored/01_simple_simulation
```

## 4. 预期结果

仿真结束后，将在本目录下生成一个 `output.yml` 文件。文件中记录了 `inflow_topic` 的所有历史消息。

由于没有出流，水箱的水位会根据水量平衡方程（`新水位 = 旧水位 + (入流量 * 时间步长) / 表面积`）线性增加。这是一个符合物理规律的、正确的仿真结果，验证了仿真核心引擎的正确性。
