{
    "description": "Mission 5.1: Turbine & Gate Behavior with Tailwater Effects. Runs two separate physics-based simulations.",
    "simulations": [
        {
            "name": "turbine_simulation",
            "simulation_settings": { "dt": 10.0, "num_steps": 100 },
            "components": [
                { "name": "forebay", "type": "StVenantReach", "params": {"length": 1000, "num_points": 11, "bottom_width": 20, "side_slope_z": 2, "manning_n": 0.03, "slope": 0.001}, "initial_H": 15.0, "initial_Q": 150.0 },
                { "name": "tailrace", "type": "StVenantReach", "params": {"length": 1000, "num_points": 11, "bottom_width": 20, "side_slope_z": 2, "manning_n": 0.03, "slope": 0.001}, "initial_H": 10.0, "initial_Q": 150.0 },
                { "name": "turbine1", "type": "TurbineNode", "params": {"equivalent_area": 25.0, "discharge_coeff": 0.9} }
            ],
            "connections": [
                { "node": "turbine1", "upstream": "forebay", "downstream": "tailrace" }
            ],
            "boundary_conditions": [
                { "component": "forebay", "variable": "Q", "index": 0, "type": "constant", "value": 150.0 },
                { "component": "tailrace", "variable": "H", "index": -1, "type": "linearly_rising", "start_value": 10.0, "end_value": 12.0 }
            ]
        },
        {
            "name": "gate_simulation",
            "simulation_settings": { "dt": 10.0, "num_steps": 100 },
            "components": [
                { "name": "forebay", "type": "StVenantReach", "params": {"length": 1000, "num_points": 11, "bottom_width": 20, "side_slope_z": 2, "manning_n": 0.03, "slope": 0.001}, "initial_H": 15.0, "initial_Q": 150.0 },
                { "name": "tailrace", "type": "StVenantReach", "params": {"length": 1000, "num_points": 11, "bottom_width": 20, "side_slope_z": 2, "manning_n": 0.03, "slope": 0.001}, "initial_H": 10.0, "initial_Q": 150.0 },
                { "name": "gate1", "type": "GateNode", "params": {"width": 15, "discharge_coeff": 0.62} }
            ],
            "connections": [
                { "node": "gate1", "upstream": "forebay", "downstream": "tailrace" }
            ],
            "boundary_conditions": [
                { "component": "forebay", "variable": "Q", "index": 0, "type": "constant", "value": 150.0 },
                { "component": "tailrace", "variable": "H", "index": -1, "type": "linearly_rising", "start_value": 10.0, "end_value": 12.0 }
            ],
            "scenario_events": [
                { "time": 500, "type": "set_opening", "target": "gate1", "value": 0.2 }
            ]
        }
    ],
    "output_settings": {
        "plot_file": "mission_5_1_results.png"
    }
}
